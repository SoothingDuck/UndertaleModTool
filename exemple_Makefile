UNDERTALEMODCLI=../UndertaleModTool/UndertaleModCli/bin/Release/net8.0/publish/UndertaleModCli
SCRIPTGMS2DIR=../UndertaleModTool/UndertaleModTool/Scripts/GMS2 Export
DATAFILE=data.win

.PHONY: font game_object path room code sequence shader sound sprite tile project

all: font game_object path room code sequence shader sound sprite tile project

font:
	${UNDERTALEMODCLI} load ${DATAFILE} -s "${SCRIPTGMS2DIR}/ExportFontDataGMS2.csx"
	find fonts -name "*.yy" -exec unix2dos {} \;

game_object:
	${UNDERTALEMODCLI} load ${DATAFILE} -s "${SCRIPTGMS2DIR}/ExportGameObjectsGMS2.csx"
	find objects -name "*.yy" -exec unix2dos {} \;

path:
	${UNDERTALEMODCLI} load ${DATAFILE} -s "${SCRIPTGMS2DIR}/ExportPathDataGMS2.csx"

project:
	${UNDERTALEMODCLI} load ${DATAFILE} -s "${SCRIPTGMS2DIR}/ExportProjectGMS2.csx"
	unix2dos *.yyp
	unix2dos *.resource_order

room:
	${UNDERTALEMODCLI} load ${DATAFILE} -s "${SCRIPTGMS2DIR}/ExportRoomsGMS2.csx"

code:
	${UNDERTALEMODCLI} load ${DATAFILE} -s "${SCRIPTGMS2DIR}/ExportScriptCodeGMS2.csx"
	find scripts -name "*.yy" -exec unix2dos {} \;
	find scripts -name "*.gml" -exec unix2dos {} \;

sequence:
	${UNDERTALEMODCLI} load ${DATAFILE} -s "${SCRIPTGMS2DIR}/ExportSequencesGMS2.csx"

shader:
	${UNDERTALEMODCLI} load ${DATAFILE} -s "${SCRIPTGMS2DIR}/ExportShaderGMS2.csx"

sound:
	${UNDERTALEMODCLI} load ${DATAFILE} -s "${SCRIPTGMS2DIR}/ExportSoundsGMS2.csx"
	find sounds -name "*.yy" -exec unix2dos {} \;

sprite:
	${UNDERTALEMODCLI} load ${DATAFILE} -s "${SCRIPTGMS2DIR}/ExportSpritesGMS2.csx"

tile:
	${UNDERTALEMODCLI} load ${DATAFILE} -s "${SCRIPTGMS2DIR}/ExportTilesetsGMS2.csx"
